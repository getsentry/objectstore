#!/usr/bin/env bash

if ! command -v uv >/dev/null 2>&1; then
    if [[ -x "${PWD}/.devenv/bin/devenv" ]]; then
        DEVENV="${PWD}/.devenv/bin/devenv"
    elif command -v devenv >/dev/null 2>&1; then
        DEVENV="devenv"
    else
        echo "ERROR: Please install uv (https://docs.astral.sh/uv/) or devenv (https://github.com/getsentry/devenv)"
        return 1
    fi

    $DEVENV sync
    PATH_add "${PWD}/.devenv/bin"
fi

uv sync --all-groups
source .venv/bin/activate

source_env_if_exists .envrc.private
